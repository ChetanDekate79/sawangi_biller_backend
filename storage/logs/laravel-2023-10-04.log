[2023-10-04 15:41:23] asus.ERROR: Maximum execution time of 60 seconds exceeded {"exception":"[object] (Symfony\\Component\\Debug\\Exception\\FatalErrorException(code: 1): Maximum execution time of 60 seconds exceeded at F:\\wardha\\Sawangi_Biller_Backend\\app\\Http\\Controllers\\Generate_HourlyData_Controller.php:256)
[stacktrace]
#0 {main}
"} 
[2023-10-04 16:30:28] asus.ERROR: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_I...' at line 123 (SQL: 
        SELECT Z1.dt_time,Z1.client_id,Z1.hour,
		
		CASE 
  WHEN Z2.value2 IS NULL THEN Z1.sum
  ELSE ROUND(Z2.value2 / 1000, 0) + Z1.sum 
END AS sum_total,
Z1.sum_ryb,
CASE 
  WHEN Z2.value2 IS NULL THEN pre_common_area
  ELSE (round(Z2.value2 / 1000,0) + Z1.sum) - Z1.sum_ryb
END AS common_area,

CASE 
  WHEN Z2.value2 IS NULL THEN pre_avg
  ELSE ROUND(((round(Z2.value2 / 1000,0) + Z1.sum) - Z1.sum_ryb ) / (round(Z2.value2 / 1000,0) + Z1.sum) * 100,0)
END AS avg,
		Z1.pre_common_area,Z1.pre_avg,Z1.sum,Z2.value2
		from  (SELECT dt_time,client_id,HOUR,sum_ryb,sum,
CASE WHEN com < 0 THEN 0 ELSE com END AS pre_common_area,
    CASE WHEN pre_avg < 0 THEN 0 ELSE pre_avg END AS pre_avg
     FROM (
            SELECT
            ROUND(SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) / 1000) - ROUND(SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END) / 1000) AS com,
            q2.dt_time,
            q2.client_id,
            q2.HOUR,
            ROUND(SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END) / 1000) AS sum_ryb,
            ROUND(SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) / 1000) AS sum,
            ROUND((SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) - SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END)) / 1000) AS pre_common_area,
            ROUND(((SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) - SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END)) / SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END)) * 100) AS pre_avg
        
          FROM
              ( SELECT
                    r.hostel_id AS client_id,
                    h.dt_time,
                    h.device_id,
                    HOUR,
                    h.wh_1 +h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31) AND HOUR = 23
        GROUP BY  h.device_id, h.hour) q1
          
          LEFT JOIN
          
              (SELECT h.dt_time,
                    r.hostel_id AS client_id,
                    h.device_id,
                    h.HOUR,
                    h.wh_1 + h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = (2023-10-03 + INTERVAL 1 DAY) and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31) AND  HOUR = 0
        GROUP BY  h.device_id, h.hour) q2
          
          ON q1.device_id = q2.device_id
          
          
        
        union
        
        
        
        SELECT
        ROUND(SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) / 1000) - ROUND(SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END) / 1000) AS com,
            t1.dt_time,
            t1.client_id,
            t1.HOUR,
            ROUND(SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END) / 1000) AS sum_ryb,
            ROUND(SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) / 1000) AS sum,
            ROUND((SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) - SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END)) / 1000) AS pre_common_area,
            ROUND(((SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) - SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END)) / SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END)) * 100) AS pre_avg
        FROM
            (
                SELECT
                    r.hostel_id AS client_id,
                    h.dt_time,
                    h.device_id,
                    HOUR,
                    h.wh_1 +h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31)
        GROUP BY  h.device_id, h.hour
        
            ) t1
        LEFT JOIN
            (
                SELECT
                    r.hostel_id AS client_id,
                    h.device_id,
                    h.HOUR,
                    h.wh_1 + h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31)
        GROUP BY  h.device_id, h.hour
            ) t2
        ON t1.client_id = t2.client_id AND t1.device_id = t2.device_id AND t1.HOUR = t2.HOUR + 1
            WHERE t1.HOUR <> 0
            GROUP BY t1.client_id, t1.HOUR
        ) AS combined_results
        ORDER BY dt_time,HOUR ) Z1  LEFT JOIN (SELECT
      q2.dt_time,
      q2.hour,
      q2.client_Id,
      q2.device_id,
      ROUND(ABS(q1.wh_r - q2.wh_r),0)  AS value2
  FROM
      (SELECT dt_time, HOUR, client_Id, device_id, round(wh_r) AS wh_r
       FROM hourly_kwh
       WHERE DATE(dt_time) = 2023-10-03
         AND HOUR = 23
         AND client_id = 
         AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_Id, device_id, round(wh_r) AS wh_r
       FROM hourly_kwh
       WHERE DATE(dt_time) = DATE(2023-10-03 + INTERVAL 1 DAY)
         AND HOUR = 0
         AND client_id = 
         AND device_id = 0) q2
  
  ON q1.device_id = q2.device_id
  
  union


SELECT 
    dt_time,
    HOUR,
    client_id,
    device_id,
    round(wh_r,0) - COALESCE((SELECT wh_r FROM hourly_kwh h2 WHERE h2.dt_time < h1.dt_time AND h2.client_id =  AND h2.device_id = 0 ORDER BY h2.dt_time DESC LIMIT 1), 0) AS diff_wh_r
FROM 
    hourly_kwh h1
WHERE 
    DATE(dt_time) = 2023-10-03
    AND client_id = 
    AND device_id = 0 AND HOUR != 0
ORDER BY 
    dt_time) Z2 ON Z1.hour = Z2. HOUR ORDER BY Z1.dt_time) {"exception":"[object] (Illuminate\\Database\\QueryException(code: 42000): SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_I...' at line 123 (SQL: 
        SELECT Z1.dt_time,Z1.client_id,Z1.hour,
\t\t
\t\tCASE 
  WHEN Z2.value2 IS NULL THEN Z1.sum
  ELSE ROUND(Z2.value2 / 1000, 0) + Z1.sum 
END AS sum_total,
Z1.sum_ryb,
CASE 
  WHEN Z2.value2 IS NULL THEN pre_common_area
  ELSE (round(Z2.value2 / 1000,0) + Z1.sum) - Z1.sum_ryb
END AS common_area,

CASE 
  WHEN Z2.value2 IS NULL THEN pre_avg
  ELSE ROUND(((round(Z2.value2 / 1000,0) + Z1.sum) - Z1.sum_ryb ) / (round(Z2.value2 / 1000,0) + Z1.sum) * 100,0)
END AS avg,
\t\tZ1.pre_common_area,Z1.pre_avg,Z1.sum,Z2.value2
\t\tfrom  (SELECT dt_time,client_id,HOUR,sum_ryb,sum,
CASE WHEN com < 0 THEN 0 ELSE com END AS pre_common_area,
    CASE WHEN pre_avg < 0 THEN 0 ELSE pre_avg END AS pre_avg
     FROM (
            SELECT
            ROUND(SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) / 1000) - ROUND(SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END) / 1000) AS com,
            q2.dt_time,
            q2.client_id,
            q2.HOUR,
            ROUND(SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END) / 1000) AS sum_ryb,
            ROUND(SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) / 1000) AS sum,
            ROUND((SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) - SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END)) / 1000) AS pre_common_area,
            ROUND(((SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) - SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END)) / SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END)) * 100) AS pre_avg
        
          FROM
              ( SELECT
                    r.hostel_id AS client_id,
                    h.dt_time,
                    h.device_id,
                    HOUR,
                    h.wh_1 +h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31) AND HOUR = 23
        GROUP BY  h.device_id, h.hour) q1
          
          LEFT JOIN
          
              (SELECT h.dt_time,
                    r.hostel_id AS client_id,
                    h.device_id,
                    h.HOUR,
                    h.wh_1 + h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = (2023-10-03 + INTERVAL 1 DAY) and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31) AND  HOUR = 0
        GROUP BY  h.device_id, h.hour) q2
          
          ON q1.device_id = q2.device_id
          
          
        
        union
        
        
        
        SELECT
        ROUND(SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) / 1000) - ROUND(SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END) / 1000) AS com,
            t1.dt_time,
            t1.client_id,
            t1.HOUR,
            ROUND(SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END) / 1000) AS sum_ryb,
            ROUND(SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) / 1000) AS sum,
            ROUND((SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) - SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END)) / 1000) AS pre_common_area,
            ROUND(((SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) - SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END)) / SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END)) * 100) AS pre_avg
        FROM
            (
                SELECT
                    r.hostel_id AS client_id,
                    h.dt_time,
                    h.device_id,
                    HOUR,
                    h.wh_1 +h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31)
        GROUP BY  h.device_id, h.hour
        
            ) t1
        LEFT JOIN
            (
                SELECT
                    r.hostel_id AS client_id,
                    h.device_id,
                    h.HOUR,
                    h.wh_1 + h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31)
        GROUP BY  h.device_id, h.hour
            ) t2
        ON t1.client_id = t2.client_id AND t1.device_id = t2.device_id AND t1.HOUR = t2.HOUR + 1
            WHERE t1.HOUR <> 0
            GROUP BY t1.client_id, t1.HOUR
        ) AS combined_results
        ORDER BY dt_time,HOUR ) Z1  LEFT JOIN (SELECT
      q2.dt_time,
      q2.hour,
      q2.client_Id,
      q2.device_id,
      ROUND(ABS(q1.wh_r - q2.wh_r),0)  AS value2
  FROM
      (SELECT dt_time, HOUR, client_Id, device_id, round(wh_r) AS wh_r
       FROM hourly_kwh
       WHERE DATE(dt_time) = 2023-10-03
         AND HOUR = 23
         AND client_id = 
         AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_Id, device_id, round(wh_r) AS wh_r
       FROM hourly_kwh
       WHERE DATE(dt_time) = DATE(2023-10-03 + INTERVAL 1 DAY)
         AND HOUR = 0
         AND client_id = 
         AND device_id = 0) q2
  
  ON q1.device_id = q2.device_id
  
  union


SELECT 
    dt_time,
    HOUR,
    client_id,
    device_id,
    round(wh_r,0) - COALESCE((SELECT wh_r FROM hourly_kwh h2 WHERE h2.dt_time < h1.dt_time AND h2.client_id =  AND h2.device_id = 0 ORDER BY h2.dt_time DESC LIMIT 1), 0) AS diff_wh_r
FROM 
    hourly_kwh h1
WHERE 
    DATE(dt_time) = 2023-10-03
    AND client_id = 
    AND device_id = 0 AND HOUR != 0
ORDER BY 
    dt_time) Z2 ON Z1.hour = Z2. HOUR ORDER BY Z1.dt_time) at F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php:664, PDOException(code: 42000): SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_I...' at line 123 at F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php:326)
[stacktrace]
#0 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(624): Illuminate\\Database\\Connection->runQueryCallback('\
        SELECT...', Array, Object(Closure))
#1 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(333): Illuminate\\Database\\Connection->run('\
        SELECT...', Array, Object(Closure))
#2 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\DatabaseManager.php(349): Illuminate\\Database\\Connection->select('\
        SELECT...')
#3 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Facades\\Facade.php(239): Illuminate\\Database\\DatabaseManager->__call('select', Array)
#4 F:\\wardha\\Sawangi_Biller_Backend\\app\\Http\\Controllers\\HostelConsumption_Controller.php(176): Illuminate\\Support\\Facades\\Facade::__callStatic('select', Array)
#5 [internal function]: App\\Http\\Controllers\\HostelConsumption_Controller->gethostelData(Object(Illuminate\\Http\\Request))
#6 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): call_user_func_array(Array, Array)
#7 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(45): Illuminate\\Routing\\Controller->callAction('gethostelData', Array)
#8 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(219): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\HostelConsumption_Controller), 'gethostelData')
#9 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(176): Illuminate\\Routing\\Route->runController()
#10 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(680): Illuminate\\Routing\\Route->run()
#11 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#12 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#13 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#14 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#15 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php(58): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#16 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Routing\\Middleware\\ThrottleRequests->handle(Object(Illuminate\\Http\\Request), Object(Closure), 60, '1')
#17 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#19 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(682): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#20 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(657): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#21 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(623): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#22 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(612): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#23 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(176): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#24 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#25 F:\\wardha\\Sawangi_Biller_Backend\\app\\Http\\Middleware\\CORS.php(20): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#26 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): App\\Http\\Middleware\\CORS->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#27 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#28 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\fideloper\\proxy\\src\\TrustProxies.php(57): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#29 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Fideloper\\Proxy\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#32 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#34 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#35 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#38 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#40 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode.php(62): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#41 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#44 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(151): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#45 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#46 F:\\wardha\\Sawangi_Biller_Backend\\public\\index.php(52): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#47 F:\\wardha\\Sawangi_Biller_Backend\\server.php(21): require_once('F:\\\\wardha\\\\Sawan...')
#48 {main}
"} 
[2023-10-04 16:31:07] asus.ERROR: SQLSTATE[42000]: Syntax error or access violation: 1065 Query was empty (SQL: ) {"exception":"[object] (Illuminate\\Database\\QueryException(code: 42000): SQLSTATE[42000]: Syntax error or access violation: 1065 Query was empty (SQL: ) at F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php:664, PDOException(code: 42000): SQLSTATE[42000]: Syntax error or access violation: 1065 Query was empty at F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php:326)
[stacktrace]
#0 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(624): Illuminate\\Database\\Connection->runQueryCallback(NULL, Array, Object(Closure))
#1 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(333): Illuminate\\Database\\Connection->run(NULL, Array, Object(Closure))
#2 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\DatabaseManager.php(349): Illuminate\\Database\\Connection->select(NULL)
#3 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Facades\\Facade.php(239): Illuminate\\Database\\DatabaseManager->__call('select', Array)
#4 F:\\wardha\\Sawangi_Biller_Backend\\app\\Http\\Controllers\\HostelConsumption_Controller.php(176): Illuminate\\Support\\Facades\\Facade::__callStatic('select', Array)
#5 [internal function]: App\\Http\\Controllers\\HostelConsumption_Controller->gethostelData(Object(Illuminate\\Http\\Request))
#6 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): call_user_func_array(Array, Array)
#7 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(45): Illuminate\\Routing\\Controller->callAction('gethostelData', Array)
#8 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(219): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\HostelConsumption_Controller), 'gethostelData')
#9 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(176): Illuminate\\Routing\\Route->runController()
#10 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(680): Illuminate\\Routing\\Route->run()
#11 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#12 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#13 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#14 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#15 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php(58): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#16 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Routing\\Middleware\\ThrottleRequests->handle(Object(Illuminate\\Http\\Request), Object(Closure), 60, '1')
#17 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#19 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(682): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#20 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(657): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#21 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(623): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#22 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(612): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#23 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(176): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#24 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#25 F:\\wardha\\Sawangi_Biller_Backend\\app\\Http\\Middleware\\CORS.php(20): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#26 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): App\\Http\\Middleware\\CORS->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#27 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#28 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\fideloper\\proxy\\src\\TrustProxies.php(57): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#29 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Fideloper\\Proxy\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#32 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#34 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#35 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#38 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#40 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode.php(62): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#41 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#44 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(151): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#45 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#46 F:\\wardha\\Sawangi_Biller_Backend\\public\\index.php(52): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#47 F:\\wardha\\Sawangi_Biller_Backend\\server.php(21): require_once('F:\\\\wardha\\\\Sawan...')
#48 {main}
"} 
[2023-10-04 16:32:57] asus.ERROR: SQLSTATE[42000]: Syntax error or access violation: 1065 Query was empty (SQL: ) {"exception":"[object] (Illuminate\\Database\\QueryException(code: 42000): SQLSTATE[42000]: Syntax error or access violation: 1065 Query was empty (SQL: ) at F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php:664, PDOException(code: 42000): SQLSTATE[42000]: Syntax error or access violation: 1065 Query was empty at F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php:326)
[stacktrace]
#0 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(624): Illuminate\\Database\\Connection->runQueryCallback(Object(Illuminate\\Database\\Query\\Expression), Array, Object(Closure))
#1 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(333): Illuminate\\Database\\Connection->run(Object(Illuminate\\Database\\Query\\Expression), Array, Object(Closure))
#2 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\DatabaseManager.php(349): Illuminate\\Database\\Connection->select(Object(Illuminate\\Database\\Query\\Expression), Array)
#3 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Facades\\Facade.php(239): Illuminate\\Database\\DatabaseManager->__call('select', Array)
#4 F:\\wardha\\Sawangi_Biller_Backend\\app\\Http\\Controllers\\HostelConsumption_Controller.php(181): Illuminate\\Support\\Facades\\Facade::__callStatic('select', Array)
#5 [internal function]: App\\Http\\Controllers\\HostelConsumption_Controller->gethostelData(Object(Illuminate\\Http\\Request))
#6 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): call_user_func_array(Array, Array)
#7 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(45): Illuminate\\Routing\\Controller->callAction('gethostelData', Array)
#8 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(219): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\HostelConsumption_Controller), 'gethostelData')
#9 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(176): Illuminate\\Routing\\Route->runController()
#10 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(680): Illuminate\\Routing\\Route->run()
#11 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#12 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#13 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#14 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#15 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php(58): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#16 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Routing\\Middleware\\ThrottleRequests->handle(Object(Illuminate\\Http\\Request), Object(Closure), 60, '1')
#17 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#19 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(682): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#20 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(657): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#21 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(623): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#22 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(612): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#23 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(176): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#24 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#25 F:\\wardha\\Sawangi_Biller_Backend\\app\\Http\\Middleware\\CORS.php(20): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#26 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): App\\Http\\Middleware\\CORS->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#27 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#28 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\fideloper\\proxy\\src\\TrustProxies.php(57): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#29 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Fideloper\\Proxy\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#32 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#34 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#35 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#38 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#40 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode.php(62): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#41 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#44 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(151): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#45 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#46 F:\\wardha\\Sawangi_Biller_Backend\\public\\index.php(52): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#47 F:\\wardha\\Sawangi_Biller_Backend\\server.php(21): require_once('F:\\\\wardha\\\\Sawan...')
#48 {main}
"} 
[2023-10-04 16:33:15] asus.ERROR: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_I...' at line 123 (SQL: 
        SELECT Z1.dt_time,Z1.client_id,Z1.hour,
		
		CASE 
  WHEN Z2.value2 IS NULL THEN Z1.sum
  ELSE ROUND(Z2.value2 / 1000, 0) + Z1.sum 
END AS sum_total,
Z1.sum_ryb,
CASE 
  WHEN Z2.value2 IS NULL THEN pre_common_area
  ELSE (round(Z2.value2 / 1000,0) + Z1.sum) - Z1.sum_ryb
END AS common_area,

CASE 
  WHEN Z2.value2 IS NULL THEN pre_avg
  ELSE ROUND(((round(Z2.value2 / 1000,0) + Z1.sum) - Z1.sum_ryb ) / (round(Z2.value2 / 1000,0) + Z1.sum) * 100,0)
END AS avg,
		Z1.pre_common_area,Z1.pre_avg,Z1.sum,Z2.value2
		from  (SELECT dt_time,client_id,HOUR,sum_ryb,sum,
CASE WHEN com < 0 THEN 0 ELSE com END AS pre_common_area,
    CASE WHEN pre_avg < 0 THEN 0 ELSE pre_avg END AS pre_avg
     FROM (
            SELECT
            ROUND(SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) / 1000) - ROUND(SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END) / 1000) AS com,
            q2.dt_time,
            q2.client_id,
            q2.HOUR,
            ROUND(SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END) / 1000) AS sum_ryb,
            ROUND(SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) / 1000) AS sum,
            ROUND((SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) - SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END)) / 1000) AS pre_common_area,
            ROUND(((SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) - SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END)) / SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END)) * 100) AS pre_avg
        
          FROM
              ( SELECT
                    r.hostel_id AS client_id,
                    h.dt_time,
                    h.device_id,
                    HOUR,
                    h.wh_1 +h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31) AND HOUR = 23
        GROUP BY  h.device_id, h.hour) q1
          
          LEFT JOIN
          
              (SELECT h.dt_time,
                    r.hostel_id AS client_id,
                    h.device_id,
                    h.HOUR,
                    h.wh_1 + h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = (2023-10-03 + INTERVAL 1 DAY) and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31) AND  HOUR = 0
        GROUP BY  h.device_id, h.hour) q2
          
          ON q1.device_id = q2.device_id
          
          
        
        union
        
        
        
        SELECT
        ROUND(SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) / 1000) - ROUND(SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END) / 1000) AS com,
            t1.dt_time,
            t1.client_id,
            t1.HOUR,
            ROUND(SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END) / 1000) AS sum_ryb,
            ROUND(SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) / 1000) AS sum,
            ROUND((SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) - SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END)) / 1000) AS pre_common_area,
            ROUND(((SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) - SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END)) / SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END)) * 100) AS pre_avg
        FROM
            (
                SELECT
                    r.hostel_id AS client_id,
                    h.dt_time,
                    h.device_id,
                    HOUR,
                    h.wh_1 +h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31)
        GROUP BY  h.device_id, h.hour
        
            ) t1
        LEFT JOIN
            (
                SELECT
                    r.hostel_id AS client_id,
                    h.device_id,
                    h.HOUR,
                    h.wh_1 + h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31)
        GROUP BY  h.device_id, h.hour
            ) t2
        ON t1.client_id = t2.client_id AND t1.device_id = t2.device_id AND t1.HOUR = t2.HOUR + 1
            WHERE t1.HOUR <> 0
            GROUP BY t1.client_id, t1.HOUR
        ) AS combined_results
        ORDER BY dt_time,HOUR ) Z1  LEFT JOIN (SELECT
      q2.dt_time,
      q2.hour,
      q2.client_Id,
      q2.device_id,
      ROUND(ABS(q1.wh_r - q2.wh_r),0)  AS value2
  FROM
      (SELECT dt_time, HOUR, client_Id, device_id, round(wh_r) AS wh_r
       FROM hourly_kwh
       WHERE DATE(dt_time) = 2023-10-03
         AND HOUR = 23
         AND client_id = 
         AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_Id, device_id, round(wh_r) AS wh_r
       FROM hourly_kwh
       WHERE DATE(dt_time) = DATE(2023-10-03 + INTERVAL 1 DAY)
         AND HOUR = 0
         AND client_id = 
         AND device_id = 0) q2
  
  ON q1.device_id = q2.device_id
  
  union


SELECT 
    dt_time,
    HOUR,
    client_id,
    device_id,
    round(wh_r,0) - COALESCE((SELECT wh_r FROM hourly_kwh h2 WHERE h2.dt_time < h1.dt_time AND h2.client_id =  AND h2.device_id = 0 ORDER BY h2.dt_time DESC LIMIT 1), 0) AS diff_wh_r
FROM 
    hourly_kwh h1
WHERE 
    DATE(dt_time) = 2023-10-03
    AND client_id = 
    AND device_id = 0 AND HOUR != 0
ORDER BY 
    dt_time) Z2 ON Z1.hour = Z2. HOUR ORDER BY Z1.dt_time) {"exception":"[object] (Illuminate\\Database\\QueryException(code: 42000): SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_I...' at line 123 (SQL: 
        SELECT Z1.dt_time,Z1.client_id,Z1.hour,
\t\t
\t\tCASE 
  WHEN Z2.value2 IS NULL THEN Z1.sum
  ELSE ROUND(Z2.value2 / 1000, 0) + Z1.sum 
END AS sum_total,
Z1.sum_ryb,
CASE 
  WHEN Z2.value2 IS NULL THEN pre_common_area
  ELSE (round(Z2.value2 / 1000,0) + Z1.sum) - Z1.sum_ryb
END AS common_area,

CASE 
  WHEN Z2.value2 IS NULL THEN pre_avg
  ELSE ROUND(((round(Z2.value2 / 1000,0) + Z1.sum) - Z1.sum_ryb ) / (round(Z2.value2 / 1000,0) + Z1.sum) * 100,0)
END AS avg,
\t\tZ1.pre_common_area,Z1.pre_avg,Z1.sum,Z2.value2
\t\tfrom  (SELECT dt_time,client_id,HOUR,sum_ryb,sum,
CASE WHEN com < 0 THEN 0 ELSE com END AS pre_common_area,
    CASE WHEN pre_avg < 0 THEN 0 ELSE pre_avg END AS pre_avg
     FROM (
            SELECT
            ROUND(SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) / 1000) - ROUND(SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END) / 1000) AS com,
            q2.dt_time,
            q2.client_id,
            q2.HOUR,
            ROUND(SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END) / 1000) AS sum_ryb,
            ROUND(SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) / 1000) AS sum,
            ROUND((SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) - SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END)) / 1000) AS pre_common_area,
            ROUND(((SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END) - SUM(CASE WHEN q1.device_id BETWEEN 1 AND 30 THEN q2.ryb - q1.ryb END)) / SUM(CASE WHEN q1.device_id = 31 THEN q2.total - q1.total END)) * 100) AS pre_avg
        
          FROM
              ( SELECT
                    r.hostel_id AS client_id,
                    h.dt_time,
                    h.device_id,
                    HOUR,
                    h.wh_1 +h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31) AND HOUR = 23
        GROUP BY  h.device_id, h.hour) q1
          
          LEFT JOIN
          
              (SELECT h.dt_time,
                    r.hostel_id AS client_id,
                    h.device_id,
                    h.HOUR,
                    h.wh_1 + h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = (2023-10-03 + INTERVAL 1 DAY) and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31) AND  HOUR = 0
        GROUP BY  h.device_id, h.hour) q2
          
          ON q1.device_id = q2.device_id
          
          
        
        union
        
        
        
        SELECT
        ROUND(SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) / 1000) - ROUND(SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END) / 1000) AS com,
            t1.dt_time,
            t1.client_id,
            t1.HOUR,
            ROUND(SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END) / 1000) AS sum_ryb,
            ROUND(SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) / 1000) AS sum,
            ROUND((SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) - SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END)) / 1000) AS pre_common_area,
            ROUND(((SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END) - SUM(CASE WHEN t1.device_id BETWEEN 1 AND 30 THEN t1.ryb - t2.ryb END)) / SUM(CASE WHEN t1.device_id = 31 THEN t1.total - t2.total END)) * 100) AS pre_avg
        FROM
            (
                SELECT
                    r.hostel_id AS client_id,
                    h.dt_time,
                    h.device_id,
                    HOUR,
                    h.wh_1 +h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31)
        GROUP BY  h.device_id, h.hour
        
            ) t1
        LEFT JOIN
            (
                SELECT
                    r.hostel_id AS client_id,
                    h.device_id,
                    h.HOUR,
                    h.wh_1 + h.wh_2 + h.wh_3 AS ryb,
                    h.wh_r + h.wh_d AS total
                FROM hourly_kwh h
        JOIN room_mfd m ON h.client_id = m.client_id
        JOIN rooms r ON r.room_id = m.room_id
        WHERE date(h.dt_time) = 2023-10-03 and r.hostel_id = Radhika AND (h.device_id BETWEEN 1 AND 30 OR h.device_id = 31)
        GROUP BY  h.device_id, h.hour
            ) t2
        ON t1.client_id = t2.client_id AND t1.device_id = t2.device_id AND t1.HOUR = t2.HOUR + 1
            WHERE t1.HOUR <> 0
            GROUP BY t1.client_id, t1.HOUR
        ) AS combined_results
        ORDER BY dt_time,HOUR ) Z1  LEFT JOIN (SELECT
      q2.dt_time,
      q2.hour,
      q2.client_Id,
      q2.device_id,
      ROUND(ABS(q1.wh_r - q2.wh_r),0)  AS value2
  FROM
      (SELECT dt_time, HOUR, client_Id, device_id, round(wh_r) AS wh_r
       FROM hourly_kwh
       WHERE DATE(dt_time) = 2023-10-03
         AND HOUR = 23
         AND client_id = 
         AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_Id, device_id, round(wh_r) AS wh_r
       FROM hourly_kwh
       WHERE DATE(dt_time) = DATE(2023-10-03 + INTERVAL 1 DAY)
         AND HOUR = 0
         AND client_id = 
         AND device_id = 0) q2
  
  ON q1.device_id = q2.device_id
  
  union


SELECT 
    dt_time,
    HOUR,
    client_id,
    device_id,
    round(wh_r,0) - COALESCE((SELECT wh_r FROM hourly_kwh h2 WHERE h2.dt_time < h1.dt_time AND h2.client_id =  AND h2.device_id = 0 ORDER BY h2.dt_time DESC LIMIT 1), 0) AS diff_wh_r
FROM 
    hourly_kwh h1
WHERE 
    DATE(dt_time) = 2023-10-03
    AND client_id = 
    AND device_id = 0 AND HOUR != 0
ORDER BY 
    dt_time) Z2 ON Z1.hour = Z2. HOUR ORDER BY Z1.dt_time) at F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php:664, PDOException(code: 42000): SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'AND device_id = 0) q1
  
  LEFT JOIN
  
      (SELECT dt_time, HOUR, client_I...' at line 123 at F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php:326)
[stacktrace]
#0 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(624): Illuminate\\Database\\Connection->runQueryCallback(Object(Illuminate\\Database\\Query\\Expression), Array, Object(Closure))
#1 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(333): Illuminate\\Database\\Connection->run(Object(Illuminate\\Database\\Query\\Expression), Array, Object(Closure))
#2 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\DatabaseManager.php(349): Illuminate\\Database\\Connection->select(Object(Illuminate\\Database\\Query\\Expression), Array)
#3 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Facades\\Facade.php(239): Illuminate\\Database\\DatabaseManager->__call('select', Array)
#4 F:\\wardha\\Sawangi_Biller_Backend\\app\\Http\\Controllers\\HostelConsumption_Controller.php(181): Illuminate\\Support\\Facades\\Facade::__callStatic('select', Array)
#5 [internal function]: App\\Http\\Controllers\\HostelConsumption_Controller->gethostelData(Object(Illuminate\\Http\\Request))
#6 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): call_user_func_array(Array, Array)
#7 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(45): Illuminate\\Routing\\Controller->callAction('gethostelData', Array)
#8 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(219): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\HostelConsumption_Controller), 'gethostelData')
#9 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(176): Illuminate\\Routing\\Route->runController()
#10 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(680): Illuminate\\Routing\\Route->run()
#11 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#12 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#13 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#14 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#15 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php(58): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#16 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Routing\\Middleware\\ThrottleRequests->handle(Object(Illuminate\\Http\\Request), Object(Closure), 60, '1')
#17 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#19 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(682): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#20 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(657): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#21 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(623): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#22 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(612): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#23 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(176): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#24 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#25 F:\\wardha\\Sawangi_Biller_Backend\\app\\Http\\Middleware\\CORS.php(20): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#26 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): App\\Http\\Middleware\\CORS->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#27 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#28 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\fideloper\\proxy\\src\\TrustProxies.php(57): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#29 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Fideloper\\Proxy\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#32 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#34 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#35 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#38 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#40 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode.php(62): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#41 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#44 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(151): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#45 F:\\wardha\\Sawangi_Biller_Backend\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#46 F:\\wardha\\Sawangi_Biller_Backend\\public\\index.php(52): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#47 F:\\wardha\\Sawangi_Biller_Backend\\server.php(21): require_once('F:\\\\wardha\\\\Sawan...')
#48 {main}
"} 
